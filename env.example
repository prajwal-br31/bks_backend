# ============================================
# BASH BOOKKEEPING - BACKEND ENVIRONMENT VARIABLES
# ============================================
# Rename this file to .env and fill in your values
# Windows: rename env.example .env
# Linux/Mac: mv env.example .env

# ============================================
# CORE SETTINGS
# ============================================
PROJECT_NAME=Bash Bookkeeping API
API_V1_PREFIX=/api/v1

# ============================================
# DATABASE (Required)
# ============================================
# Local development
DATABASE_URL=postgresql+psycopg2://postgres:postgres@localhost:5432/bash

# Production examples:
# AWS RDS: postgresql+psycopg2://user:password@your-db.region.rds.amazonaws.com:5432/bash
# Supabase: postgresql+psycopg2://postgres:password@db.xxxxx.supabase.co:5432/postgres
# Railway: postgresql+psycopg2://postgres:password@containers-us-west-xxx.railway.app:5432/railway

# ============================================
# OPENAI (Optional - for AI features)
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================
# EMAIL INGESTION
# ============================================
# Provider: "imap" or "gmail"
EMAIL_PROVIDER=imap

# --- IMAP Configuration (Gmail, Outlook, etc.) ---
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USERNAME=your-email@gmail.com
# For Gmail: Use App Password (https://myaccount.google.com/apppasswords)
IMAP_PASSWORD=your-app-password
IMAP_USE_SSL=true
IMAP_FOLDER=INBOX

# --- Gmail API Configuration (OAuth2) ---
# Get from Google Cloud Console: https://console.cloud.google.com/
GMAIL_CLIENT_ID=your-client-id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your-client-secret
GMAIL_REFRESH_TOKEN=your-refresh-token
GMAIL_LABEL=invoices

# --- Email Polling Settings ---
EMAIL_POLL_INTERVAL_SECONDS=30
# Comma-separated list of trusted domains
EMAIL_WHITELIST_DOMAINS=trusted-vendor.com,supplier.com
# Comma-separated list of trusted email addresses
EMAIL_WHITELIST_ADDRESSES=invoices@vendor.com,billing@supplier.com

# ============================================
# OCR (Document Processing)
# ============================================
# Provider: "tesseract", "google_vision", or "aws_textract"
OCR_PROVIDER=tesseract

# --- Google Vision (if OCR_PROVIDER=google_vision) ---
# Paste your service account JSON (single line, escaped)
GOOGLE_CLOUD_CREDENTIALS_JSON=

# --- AWS Textract (if OCR_PROVIDER=aws_textract) ---
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# ============================================
# OBJECT STORAGE (S3-Compatible) - Required
# ============================================
# AWS S3
S3_ENDPOINT_URL=https://s3.amazonaws.com
S3_ACCESS_KEY=your-aws-access-key
S3_SECRET_KEY=your-aws-secret-key
S3_BUCKET_NAME=bookkeeping-documents
S3_REGION=us-east-1

# --- Alternative S3-Compatible Services ---
# MinIO (self-hosted):
# S3_ENDPOINT_URL=http://localhost:9000

# DigitalOcean Spaces:
# S3_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com

# Cloudflare R2:
# S3_ENDPOINT_URL=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com

# Backblaze B2:
# S3_ENDPOINT_URL=https://s3.us-west-002.backblazeb2.com

# ============================================
# REDIS + CELERY (Required for background tasks)
# ============================================
# Local development
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Production with password:
# REDIS_URL=redis://:your-redis-password@your-redis-host:6379/0

# Upstash (serverless Redis):
# REDIS_URL=rediss://default:your-password@your-upstash-endpoint:6379

# ============================================
# SECURITY (Virus Scanning)
# ============================================
# Options: "clamav" or "none"
VIRUS_SCANNER=clamav
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# ============================================
# CLASSIFICATION SETTINGS
# ============================================
# Minimum confidence score (0.0-1.0) for auto-classification
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.75
# Auto-post invoices to accounting (use with caution)
AUTO_POST_MODE=false

# ============================================
# WEBSOCKET (Real-time notifications)
# ============================================
WEBSOCKET_ENABLED=true

# ============================================
# CORS (Add your frontend domains)
# ============================================
# Handled in main.py - update allowed origins for production

